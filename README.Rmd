---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# gmat
An R package for simulating positive definite matrices constrained by acyclic
directed and undirected graphs.

[![Build Status](https://travis-ci.org/irenecrsn/gmat.svg?branch=master)](https://travis-ci.org/irenecrsn/gmat)
[![codecov](https://codecov.io/gh/irenecrsn/gmat/branch/dev/graph/badge.svg)](https://codecov.io/gh/irenecrsn/gmat)
[![Lifecycle: maturing](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![CRAN downloads](http://cranlogs.r-pkg.org/badges/grand-total/gmat)](https://CRAN.R-project.org/package=gmat)
[![CRAN status](http://www.r-pkg.org/badges/version/gmat)](https://CRAN.R-project.org/package=gmat)

## Installation

The package is available on `CRAN`, to get the latest stable version use:
```{r, eval = FALSE}
install.packages("gmat")
```

Alternatively, using the R package `devtools` one may install the development version:
```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("irenecrsn/gmat")
```

The only R package required for `gmat` is `igraph`, which can also be installed
from CRAN.

## An example of use 

First, we generate a random undirected graph with `3` nodes
and density `0.5`. Then we generate, using our `port()`
function, `2` matrices consistent with such random graphical
structure.

```{r}
library(gmat)

ug <- rgraph(p = 3, d = 0.5)
igraph::print.igraph(ug)
port(N = 2, ug = ug)
```

We appreciate how the zero pattern is shared by all of the
simulated matrices. The return value is an array, and so the
individual matrices
can be accessed as `matrices[, , n]`, where `n` is the index
of the matrix we
want to retrieve from the sample, ranging from `1` to `N`.

We may also sample correlation matrices using i.i.d.
coefficients in their upper
Cholesky factor `U`.
```{r}
chol_iid(N = 2)
```
A specific zero pattern can be enforced in `U` using an
acyclic digraph.
```{r}
dag <- rgraph(p = 3, d = 0.5, dag = TRUE)
m <- chol_iid(dag = dag)[, , 1]
L <- t(chol(anti_t(m)))
U <- t(anti_t(L))
igraph::print.igraph(dag)
print(U)
print(m)
```

See more examples and paper references at [the documentation
website](https://irenecrsn.github.io/gmat/) for the package.


